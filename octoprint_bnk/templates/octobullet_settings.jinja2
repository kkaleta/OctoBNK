<form class="form-horizontal">

    <fieldset>
        <legend>{{ _('Basic settings') }}</legend>

        <div class="control-group">
            <label class="control-label">{{ _('Access Token') }}</label>
            <div class="controls">
                <input type="text" class="input-block-level" data-bind="value: settings.settings.plugins.octobullet.access_token">
                <span class="help-block">{% trans %}
                        In order to use the Pushbullet plugin, you need to configure your Pushbullet
                        Access Token. You can find that in
                        <a href="https://www.pushbullet.com/#settings" target="_blank">your Pushbullet account settings</a>.
                    {% endtrans %}
                </span>
            </div>
        </div>

        <div class="control-group">
            <label class="control-label">{{ _('Channel') }}</label>
            <div class="controls">
                <input type="text" data-bind="value: settings.settings.plugins.octobullet.push_channel">
                <span class="help-block">{% trans %}
                    You can also define the tag of a channel here to push the messages to instead of your general Pushbullet
                    account. You can read more about Pushbullet's channels <a href="https://www.pushbullet.com/channels" target="_blank">on Pushbullet</a>.
                {% endtrans %}</span>
            </div>
        </div>

        <div class="control-group">
            <div class="controls">
                <button class="btn btn-primary btn-block" data-bind="click: sendTestMessage, enable: !busy(), css: {disabled: busy()}"><i class="icon-spinner icon-spin" data-bind="visible: busy"></i> {{ _('Send a test message') }}</button>
            </div>
        </div>

    </fieldset>

    <fieldset>
        <legend>{{ _('Messages on print completion') }}</legend>

        <div class="control-group">
            <label class="control-label">{{ _('Message title') }}</label>
            <div class="controls">
                <input type="text" class="input-block-level" data-bind="value: settings.settings.plugins.octobullet.printDone.title">
            </div>
        </div>

        <div class="control-group">
            <label class="control-label">{{ _('Message body') }}</label>
            <div class="controls">
                <textarea rows="4" class="block" data-bind="value: settings.settings.plugins.octobullet.printDone.body"></textarea>
            </div>
        </div>

        <div class="control-group">
            <div class="controls">
                <span class="help-block">{% trans %}
                    Available placeholders: <code>{file}</code> - printed file, <code>{elapsed_time}</code> - duration of the print
                {% endtrans %}</span>
            </div>
        </div>

    </fieldset>

    <fieldset>
        <legend>{{ _('Messages on print progress') }}</legend>

        <div class="control-group">
            <div class="controls">
                <label class="checkbox">
                    <input type="checkbox" data-bind="checked: settings.settings.plugins.octobullet.periodic_updates">{{ _('Enable periodic updates') }}
                </label>
                <span class="help-block"><span class="label label-warning">{{ _('Warning') }}</span>{% trans %}
                    Be aware of the <a href="https://docs.pushbullet.com/#push-limit" target="_blank">monthly message limit</a>
                    applied to free Pushbullet accounts!
                {% endtrans %}</span>
            </div>
        </div>

        <div class="control-group" data-bind="visible: settings.settings.plugins.octobullet.periodic_updates">
            <label class="control-label">{{ _('Update interval') }}</label>
            <div class="controls">
                <div class="input-append">
                    <input type="number" class="input-mini" min="1" data-bind="value: settings.settings.plugins.octobullet.periodic_updates_interval">
                    <span class="add-on">min</span>
                </div>
                <span class="help-block">{% trans %}
                    You can define a time interval in minutes here for regular update
                    messages as the print progresses. The first message will come at this
                    interval after printing has started. No messages are sent if the estimated
                    time remaining is less than the interval.
                {% endtrans %}</span>
            </div>
        </div>

        <div class="control-group" data-bind="visible: settings.settings.plugins.octobullet.periodic_updates">
            <label class="control-label">{{ _('Message title') }}</label>
            <div class="controls">
                <input type="text" class="input-block-level" data-bind="value: settings.settings.plugins.octobullet.printProgress.title">
            </div>
        </div>

        <div class="control-group" data-bind="visible: settings.settings.plugins.octobullet.periodic_updates">
            <label class="control-label">{{ _('Message body') }}</label>
            <div class="controls">
                <textarea rows="4" class="block" data-bind="value: settings.settings.plugins.octobullet.printProgress.body"></textarea>
            </div>
        </div>

        <div class="control-group" data-bind="visible: settings.settings.plugins.octobullet.periodic_updates">
            <div class="controls">
                <span class="help-block">{% trans %}
                    Available placeholders: <code>{file}</code> - printed file, <code>{elapsed_time}</code> - duration of the print so far,
                    <code>{remaining_time}</code> - remainding duration of the print, <code>{eta}</code> - estimated time of completion,
                    <code>{progress}</code> - print progress in percent
                {% endtrans %}</span>
            </div>
        </div>

    </fieldset>

</form>
